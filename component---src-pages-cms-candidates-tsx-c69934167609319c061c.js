/*! For license information please see component---src-pages-cms-candidates-tsx-c69934167609319c061c.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2585],{362:function(e,n,t){t.d(n,{P:function(){return r}});const r="\n  table { \n    width: 100%; \n    border-collapse: collapse; \n    font-size: 13px; \n    table-layout: fixed; /* âœ… prevents column resizing */\n  }\n\n  th, td { \n    padding: 8px 14px; \n    border-bottom: 1px solid var(--border);\n    text-align: left; \n    white-space: nowrap; \n    overflow: hidden; \n    text-overflow: ellipsis; \n    vertical-align: middle;\n    max-width: 220px; /* âœ… keeps text clipped on hover */\n  }\n\n  th { \n    color: var(--muted); \n    font-size: 11px; \n    text-transform: uppercase; \n  }\n\n  tr { \n    cursor: pointer; \n    transition: background 0.2s ease; \n  }\n\n  tr:hover { \n    background: var(--accent-bg); /* âœ… only row background changes, not width */\n  }\n\n  th:hover, td:hover { \n    white-space: nowrap; \n    overflow: hidden; \n    text-overflow: ellipsis; \n  }\n\n  .avatar-wrapper { \n    width: 32px; \n    height: 32px; \n    border-radius: 50%; \n    overflow: hidden; \n    background: var(--border);\n    display: flex; \n    align-items: center; \n    justify-content: center; \n  }\n\n  .pill { \n    display: inline-flex; \n    align-items: center; \n    border-radius: 5px; \n    padding: 2px 8px; \n    font-size: 11px; \n    white-space: nowrap; \n  }\n\n  .pill.Approved { background: rgba(16,185,129,0.15); color: #10b981; }\n  .pill.Pending { background: rgba(245,158,11,0.15); color: #f59e0b; }\n  .pill.Under-Review { background: rgba(59,130,246,0.15); color: #3b82f6; }\n\n  .tooltip { \n    position: fixed; \n    background: var(--panel); \n    color: var(--text);\n    border: 1px solid var(--border); \n    padding: 5px 8px; \n    font-size: 12px;\n    border-radius: 5px; \n    white-space: normal; \n    max-width: 240px; \n    z-index: 9999;\n    pointer-events: none; \n    box-shadow: 0 4px 10px rgba(0,0,0,0.15);\n    transform: translate(-50%, -100%); \n  }\n"},1302:function(e,n,t){t.d(n,{A:function(){return d}});var r=t(6540),a=t(7490),o=t(5268);function i(e){let{navOpen:n,setNavOpen:t}=e;const a=e=>{(0,o.navigate)(e),t(!1)};return r.createElement(r.Fragment,null,r.createElement("style",null,`\n        .sidenav-overlay {\n          position: fixed; top: 0; left: 0; height: 100%;\n          width: ${n?"220px":"0"};\n          background: var(--panel); border-right: 1px solid var(--border);\n          overflow: hidden; transition: width .25s ease-in-out; z-index: 40;\n          display: flex; flex-direction: column;\n          padding: ${n?"20px":"0"};\n          gap: 6px;\n        }\n        .sidenav-overlay button {\n          background: none; border: none; color: var(--text);\n          text-align: left; padding: 10px; font-size: 14px; border-radius: 6px;\n          cursor: pointer;\n          width: 100%;\n        }\n        .sidenav-overlay button:hover { background: var(--accent-bg); }\n        .nav-backdrop {\n          position: fixed; inset: 0; background: rgba(0,0,0,0.4); z-index: 35;\n          opacity: ${n?"1":"0"};\n          pointer-events: ${n?"auto":"none"};\n          transition: opacity .2s;\n        }\n      `),r.createElement("div",{className:"sidenav-overlay"},r.createElement("button",{onClick:()=>a("/cms")},"ðŸ  Dashboard"),r.createElement("button",{onClick:()=>a("/cms/candidates")},"ðŸ‘¥ Candidates"),r.createElement("button",{onClick:()=>a("/cms/members")},"ðŸ§‘â€ðŸ¤â€ðŸ§‘ Members"),r.createElement("button",{onClick:()=>a("/cms/editor")},"ðŸ“ Editor"),r.createElement("button",{onClick:()=>a("/cms/pricing")},"ðŸ’° Pricing & Usage")),r.createElement("div",{className:"nav-backdrop",onClick:()=>t(!1)}))}var l=t(3641);function d(e){let{title:n="Tinh Hoa Viá»‡t CMS",onThemeChange:t,children:o}=e;const{0:d,1:s}=(0,r.useState)("light"),{0:c,1:p}=(0,r.useState)(!1),{0:u,1:g}=(0,r.useState)("");return r.createElement("div",{className:`app ${d}`},r.createElement("style",null,(0,a.X)(c)),r.createElement(i,{navOpen:c,setNavOpen:p}),r.createElement(l.A,{title:n,theme:d,setTheme:s,navOpen:c,setNavOpen:p,onThemeChange:t}),r.createElement("main",null,"function"==typeof o?o({query:u}):o),r.createElement("footer",null,"Tinh Hoa Viet"))}},2479:function(e,n,t){var r=t(6540),a=t(6898),o=t(5268);n.A=e=>{let{children:n,role:t="member",redirect:i="/members/dashboard"}=e;const{0:l,1:d}=(0,r.useState)(null),{0:s,1:c}=(0,r.useState)(null),{0:p,1:u}=(0,r.useState)(!0),{0:g,1:b}=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{u(!0);try{var e,n;const{data:r}=await a.ND.auth.getSession(),i=r.session;if(d(i),null==i||!i.user)return(0,o.navigate)("/sign-in"),b(!1),void c(null);const l=null!==(e=null===(n=i.user.user_metadata)||void 0===n?void 0:n.role)&&void 0!==e?e:"member";if(c(l),"string"==typeof t)b(l===t||"member"===t&&!!l);else{const e=t[l];b(!!e)}}catch(r){console.error("RoleRoutes check error:",r),b(!1)}finally{u(!1)}})()},[t]);const m={allowed:g,loading:p,session:l,role:s};return"function"==typeof n?r.createElement(r.Fragment,null,n(m)):((0,r.useEffect)(()=>{if(!p&&s)if("string"==typeof t)g||(0,o.navigate)(i);else{const e=t[s];e?!g&&e.onFalse?(0,o.navigate)(e.onFalse):g&&e.onTrue&&(0,o.navigate)(e.onTrue):(0,o.navigate)(i)}},[p,g,s,t,i]),p?null:g||"string"!=typeof t?r.createElement(r.Fragment,null,n):null)}},2731:function(e,n,t){t.r(n),t.d(n,{default:function(){return x}});var r=t(6540),a=t(2479),o=t(1302),i=t(362),l=t(6462),d=t(2806),s=e=>{let{candidatesData:n}=e;const t=n||{},a=(null==t?void 0:t.rows)||[];if(!a.length)return r.createElement("div",{style:{padding:40,textAlign:"center",color:"#888"}},"âš ï¸ No candidates found.");const{URL_REWRITING:o}=(0,d.W)();return r.createElement("section",{style:{position:"relative"}},r.createElement("style",null,i.P),r.createElement("div",{className:"table-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:"1px solid var(--border)"}},r.createElement("div",null,r.createElement("strong",null,"Candidates"),r.createElement("div",{style:{fontSize:"11px",color:"var(--muted)"}},"Showing ",a.length," total"))),r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"#"),r.createElement("th",null,"Timestamp"),r.createElement("th",null,"Name"),r.createElement("th",null,"Role"),r.createElement("th",null,"Organization"),r.createElement("th",null,"Email"),r.createElement("th",null,"Website"),r.createElement("th",null,"Impact"),r.createElement("th",null,"ID"))),r.createElement("tbody",null,a.map((e,n)=>r.createElement("tr",{key:e.id||n,style:{cursor:"pointer"},onClick:()=>(e=>{var n;const t=String(null!==(n=null==e?void 0:e.id)&&void 0!==n?n:"unknown"),r=encodeURIComponent(t);if(o){let n="";const t=new URLSearchParams;for(const[r,i]of Object.entries(e)){if(null==i)continue;let e=String(i).trim();if(e=e.replace(/^\s*[^:â€“-]+[:â€“-]\s*/u,"").trim(),/^\/\//.test(e)&&(e="https:"+e),/^https?:\/\//i.test(e)){const a=btoa(e);t.append(r,a),n+=`&${r}=b64(${a})`}else t.append(r,e),n+=`&${r}=${e}`}const a=t.toString(),o=`/cms/candidates/${r}${a?`?${a}`:""}`;console.group("ðŸ§  Candidate Navigation Debug"),console.log("ðŸ”¹ Raw Candidate:",e),console.log("ðŸ”¹ Build String (debug):",n),console.log("ðŸ”¹ Encoded Query String:",a),console.log("ðŸš€ Full URL:",o),console.groupEnd(),(0,l.navigate)(o)}else console.group("ðŸ§­ State Navigation"),console.log("âž¡ï¸ Path:",`/cms/candidates/${r}`),console.log("ðŸ“¦ State:",e),console.groupEnd(),(0,l.navigate)(`/cms/candidates/${r}`,{state:{candidate:e}})})(e)},r.createElement("td",null,n+1),r.createElement("td",null,e.Timestamp||"â€”"),r.createElement("td",null,e.name||"â€”"),r.createElement("td",null,e["title-or-role-in-organization"]||"â€”"),r.createElement("td",null,e.organization||"â€”"),r.createElement("td",null,e.email||"â€”"),r.createElement("td",null,e.website?r.createElement("a",{href:e.website,target:"_blank",rel:"noreferrer",onClick:e=>e.stopPropagation()},e.website.replace("https://","")):"â€”"),r.createElement("td",null,e.impact||"â€”"),r.createElement("td",null,e.id||"â€”"))))))},c=t(9407);const p=(0,c.A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),u=(0,c.A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),g="https://script.google.com/macros/s/AKfycbzdWXbM8Q_hBnKnk5LXj20A2CLmxBxI0uro5eNl2Yo7i9ShHrTBIJQy6Scz7Wu5g-xu8A/exec",b="hT_W8.pN-kQv7rZ~sD1y";async function m(e){const n=new URLSearchParams({password:b,...Object.fromEntries(Object.entries(e).map(e=>{let[n,t]=e;return[n,String(t)]}))}),t=await fetch(`${g}?${n.toString()}`);if(!t.ok)throw new Error(`HTTP ${t.status} - ${t.statusText}`);return await t.json()}function x(){const{0:e,1:n}=(0,r.useState)(null),{0:t,1:i}=(0,r.useState)({page:1,totalPages:1}),{0:l,1:d}=(0,r.useState)(!1);async function c(e){try{d(!0);const t=await async function(e){var n,t;void 0===e&&(e={});const r={mode:"pagination",page:null!==(n=e.page)&&void 0!==n?n:1,limit:null!==(t=e.limit)&&void 0!==t?t:10};return e.timestamp&&(r.timestamp=e.timestamp),await m(r)}({page:e,limit:10});n(t),i({page:t.page,totalPages:t.totalPages})}catch(t){console.error("ðŸ’¥ Failed to load candidates:",t)}finally{d(!1)}}(0,r.useEffect)(()=>{c(1)},[]);const g=()=>{t.page<t.totalPages&&c(t.page+1)},b=()=>{t.page>1&&c(t.page-1)};return r.createElement(a.A,{role:"admin"},r.createElement(o.A,null,()=>r.createElement(r.Fragment,null,l?r.createElement("div",{style:{padding:40,textAlign:"center"}},"â³ Loading candidatesâ€¦"):r.createElement(r.Fragment,null,r.createElement(s,{candidatesData:e}),e&&e.totalPages>1&&r.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",padding:"12px",borderTop:"1px solid var(--border)"}},r.createElement("button",{onClick:b,disabled:t.page<=1,style:{opacity:t.page<=1?.5:1,cursor:t.page<=1?"not-allowed":"pointer"}},r.createElement(p,{size:14})," Prev"),r.createElement("span",{style:{fontSize:"12px"}},"Page ",t.page," / ",t.totalPages),r.createElement("button",{onClick:g,disabled:t.page>=t.totalPages,style:{opacity:t.page>=t.totalPages?.5:1,cursor:t.page>=t.totalPages?"not-allowed":"pointer"}},"Next ",r.createElement(u,{size:14})))))))}},2806:function(e,n,t){t.d(n,{W:function(){return a}});var r=t(6540);function a(e){if(void 0===e&&(e={}),"undefined"==typeof window)return e;const{0:n,1:t}=(0,r.useState)(e);return(0,r.useEffect)(()=>{const n=window.MAIN_CONTENT;n&&"object"==typeof n&&t({...e,...n})},[]),n}},3641:function(e,n,t){t.d(n,{A:function(){return i}});var r=t(6540),a=t(8697),o=t(9230);function i(e){let{title:n="Tinh Hoa Viá»‡t CMS",onThemeChange:t,theme:i,setTheme:l,navOpen:d,setNavOpen:s}=e;const{0:c,1:p}=(0,r.useState)(!1),u=(0,r.useRef)(null);return(0,r.useEffect)(()=>{const e=e=>{u.current&&!u.current.contains(e.target)&&p(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),(0,r.useEffect)(()=>{document.body.dataset.theme=i,null==t||t(i)},[i,t]),r.createElement(r.Fragment,null,r.createElement("style",null,"\n        header {\n          background: var(--panel); border-bottom: 1px solid var(--border);\n          padding: 12px 20px; display: flex; align-items: center;\n          justify-content: space-between; position: sticky; top: 0; z-index: 30;\n        }\n        .brand { display: flex; align-items: center; gap: 8px;\n          font-weight: 600; color: var(--text); font-size: 14px;}\n        .brand-icon { width: 24px; height: 24px;\n          background: linear-gradient(135deg, #10b981, #059669);\n          border-radius: 3px;}\n        .actions { display: flex; align-items: center; gap: 10px;}\n        .dropdown { position: relative; }\n        .menu { position: absolute; top: 110%; right: 0; background: var(--panel);\n          border: 1px solid var(--border); border-radius: 8px;\n          box-shadow: 0 4px 10px rgba(0,0,0,0.2);\n          width: 160px; overflow: hidden; z-index: 50; display: none;}\n        .menu.open { display: block; }\n        .menu button { width: 100%; justify-content: flex-start;\n          background: none; border-radius: 0; }\n        .menu button:hover { background: var(--accent-bg); }\n        .menu hr { border: none; border-top: 1px solid var(--border); margin: 4px 0; }\n      "),r.createElement("header",null,r.createElement("div",{className:"brand"},r.createElement("button",{onClick:()=>s(!d),style:{background:"none",border:"none",cursor:"pointer"}},d?r.createElement(a.A,{size:18}):r.createElement(o.A,{size:18})),r.createElement("div",{className:"brand-icon"}),n),r.createElement("div",{className:"actions"})))}},7490:function(e,n,t){t.d(n,{X:function(){return r}});const r=function(e){return void 0===e&&(e=!1),`\n  body, html { margin: 0; font-family: 'Inter', sans-serif; }\n  .app { min-height: 100vh; background: var(--bg); color: var(--text);\n    transition: background .3s, color .3s; overflow-x: hidden;}\n  .app.light {\n    --bg: #f8fafc; --panel: #ffffff; --border: rgba(0,0,0,0.08);\n    --text: #111827; --muted: #6b7280; --accent: #10b981;\n    --accent-bg: rgba(16,185,129,0.1);\n  }\n  .app.dark {\n    --bg: #0f1318; --panel: #0b0f14; --border: rgba(255,255,255,0.08);\n    --text: #d1d5db; --muted: #9ca3af; --accent: #10b981;\n    --accent-bg: rgba(16,185,129,0.15);\n  }\n\n  header {\n    background: var(--panel); border-bottom: 1px solid var(--border);\n    padding: 12px 20px; display: flex; align-items: center;\n    justify-content: space-between; position: sticky; top: 0; z-index: 30;\n    overflow: hidden; /* keep layout stable during nav animation */\n  }\n\n  .brand { \n    display: inline-flex; align-items: center; gap: 8px;\n    font-weight: 600; color: var(--text); font-size: 14px;\n    white-space: nowrap; overflow: hidden; flex-shrink: 0;\n  }\n  /* âœ… explicitly protect hamburger icon */\n  .brand button.hamburger {\n    all: unset;                /* ignore global button resets */\n    display: flex; align-items: center; justify-content: center;\n    width: 28px; height: 28px;\n    cursor: pointer; color: var(--text);\n    flex-shrink: 0;\n  }\n\n  .brand-icon { width: 24px; height: 24px;\n    background: linear-gradient(135deg, #10b981, #059669);\n    border-radius: 3px; flex-shrink: 0; }\n\n  .actions { display: flex; align-items: center; gap: 10px;}\n\n  .search-box { position: relative; }\n  .search-box input {\n    background: var(--panel); border: 1px solid var(--border);\n    border-radius: 4px; color: var(--text);\n    padding: 7px 8px 7px 30px; width: 200px; font-size: 13px;\n    outline: none; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\n  }\n  .search-icon {\n    position: absolute; left: 8px; top: 50%;\n    transform: translateY(-50%); opacity: .6; color: var(--muted);\n  }\n\n  button {\n    border: none; border-radius: 5px; font-size: 13px; padding: 7px 12px;\n    cursor: pointer; background: var(--panel); color: var(--text);\n    display: flex; align-items: center; gap: 6px; transition: all .2s;\n  }\n  button:hover { background: var(--accent-bg); }\n  .primary-btn { background: var(--accent); color: #072c21; font-weight: 500;}\n\n  main { max-width: 1100px; margin: 30px auto; padding: 0 20px;}\n  section { background: var(--panel); border: 1px solid var(--border);\n    border-radius: 10px; overflow: hidden;}\n\n  .table-header {\n    display: flex; justify-content: space-between; align-items: center;\n    padding: 12px 16px; border-bottom: 1px solid var(--border);\n  }\n\n  table { width: 100%; border-collapse: collapse; font-size: 13px; }\n  th, td {\n    text-align: left; padding: 8px 16px; border-bottom: 1px solid var(--border);\n    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\n    max-width: 180px;\n  }\n  th { color: var(--muted); font-size: 11px; text-transform: uppercase; }\n  td:hover { overflow: visible; white-space: normal; }\n  td[title]:hover::after {\n    content: attr(title);\n    position: absolute; background: var(--panel); color: var(--text);\n    border: 1px solid var(--border); padding: 6px 8px; border-radius: 5px;\n    white-space: normal; z-index: 999; box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n  }\n  tr:hover { background: var(--accent-bg); }\n\n  .pill { display: inline-flex; align-items: center; gap: 5px;\n    border-radius: 5px; padding: 2px 8px; font-size: 11px; }\n  .pill.Approved { background: rgba(16,185,129,0.15); color: #10b981; }\n  .pill.Pending { background: rgba(245,158,11,0.15); color: #f59e0b; }\n  .pill["Under Review"] { background: rgba(59,130,246,0.15); color: #3b82f6; }\n\n  footer { text-align: center; color: var(--muted); font-size: 12px;\n    margin: 40px 0 20px;}\n\n  .dropdown { position: relative; }\n  .menu {\n    position: absolute; top: 110%; right: 0; background: var(--panel);\n    border: 1px solid var(--border); border-radius: 8px;\n    box-shadow: 0 4px 10px rgba(0,0,0,0.2);\n    width: 160px; overflow: hidden; z-index: 50; display: none;\n  }\n  .menu.open { display: block; }\n  .menu button { width: 100%; justify-content: flex-start;\n    background: none; border-radius: 0; }\n  .menu button:hover { background: var(--accent-bg); }\n  .menu hr { border: none; border-top: 1px solid var(--border); margin: 4px 0; }\n\n  .sidenav-overlay {\n    position: fixed; top: 0; left: 0; height: 100%;\n    width: ${e?"220px":"0"};\n    background: var(--panel); border-right: 1px solid var(--border);\n    overflow: hidden; transition: width .25s ease-in-out; z-index: 40;\n    display: flex; flex-direction: column; padding: ${e?"20px":"0"};\n  }\n  .sidenav-overlay button {\n    background: none; border: none; color: var(--text);\n    text-align: left; padding: 8px; font-size: 14px; border-radius: 6px;\n  }\n  .sidenav-overlay button:hover { background: var(--accent-bg); }\n  .nav-backdrop {\n    position: fixed; inset: 0; background: rgba(0,0,0,0.4); z-index: 35;\n    opacity: ${e?"1":"0"};\n    pointer-events: ${e?"auto":"none"};\n    transition: opacity .2s;\n  }\n`}},8697:function(e,n,t){t.d(n,{A:function(){return r}});const r=(0,t(9407).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9230:function(e,n,t){t.d(n,{A:function(){return r}});const r=(0,t(9407).A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},9407:function(e,n,t){t.d(n,{A:function(){return s}});var r=t(6540);const a=e=>{const n=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,t)=>t?t.toUpperCase():n.toLowerCase()))(e);return n.charAt(0).toUpperCase()+n.slice(1)},o=(...e)=>e.filter((e,n,t)=>Boolean(e)&&""!==e.trim()&&t.indexOf(e)===n).join(" ").trim(),i=e=>{for(const n in e)if(n.startsWith("aria-")||"role"===n||"title"===n)return!0};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const d=(0,r.forwardRef)(({color:e="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:d="",children:s,iconNode:c,...p},u)=>(0,r.createElement)("svg",{ref:u,...l,width:n,height:n,stroke:e,strokeWidth:a?24*Number(t)/Number(n):t,className:o("lucide",d),...!s&&!i(p)&&{"aria-hidden":"true"},...p},[...c.map(([e,n])=>(0,r.createElement)(e,n)),...Array.isArray(s)?s:[s]])),s=(e,n)=>{const t=(0,r.forwardRef)(({className:t,...i},l)=>{return(0,r.createElement)(d,{ref:l,iconNode:n,className:o(`lucide-${s=a(e),s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,t),...i});var s});return t.displayName=a(e),t}}}]);
//# sourceMappingURL=component---src-pages-cms-candidates-tsx-c69934167609319c061c.js.map