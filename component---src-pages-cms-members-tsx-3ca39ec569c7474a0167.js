/*! For license information please see component---src-pages-cms-members-tsx-3ca39ec569c7474a0167.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6736],{362:function(e,n,t){t.d(n,{P:function(){return r}});const r="\n  table { \n    width: 100%; \n    border-collapse: collapse; \n    font-size: 13px; \n    table-layout: fixed; /* âœ… prevents column resizing */\n  }\n\n  th, td { \n    padding: 8px 14px; \n    border-bottom: 1px solid var(--border);\n    text-align: left; \n    white-space: nowrap; \n    overflow: hidden; \n    text-overflow: ellipsis; \n    vertical-align: middle;\n    max-width: 220px; /* âœ… keeps text clipped on hover */\n  }\n\n  th { \n    color: var(--muted); \n    font-size: 11px; \n    text-transform: uppercase; \n  }\n\n  tr { \n    cursor: pointer; \n    transition: background 0.2s ease; \n  }\n\n  tr:hover { \n    background: var(--accent-bg); /* âœ… only row background changes, not width */\n  }\n\n  th:hover, td:hover { \n    white-space: nowrap; \n    overflow: hidden; \n    text-overflow: ellipsis; \n  }\n\n  .avatar-wrapper { \n    width: 32px; \n    height: 32px; \n    border-radius: 50%; \n    overflow: hidden; \n    background: var(--border);\n    display: flex; \n    align-items: center; \n    justify-content: center; \n  }\n\n  .pill { \n    display: inline-flex; \n    align-items: center; \n    border-radius: 5px; \n    padding: 2px 8px; \n    font-size: 11px; \n    white-space: nowrap; \n  }\n\n  .pill.Approved { background: rgba(16,185,129,0.15); color: #10b981; }\n  .pill.Pending { background: rgba(245,158,11,0.15); color: #f59e0b; }\n  .pill.Under-Review { background: rgba(59,130,246,0.15); color: #3b82f6; }\n\n  .tooltip { \n    position: fixed; \n    background: var(--panel); \n    color: var(--text);\n    border: 1px solid var(--border); \n    padding: 5px 8px; \n    font-size: 12px;\n    border-radius: 5px; \n    white-space: normal; \n    max-width: 240px; \n    z-index: 9999;\n    pointer-events: none; \n    box-shadow: 0 4px 10px rgba(0,0,0,0.15);\n    transform: translate(-50%, -100%); \n  }\n"},859:function(e,n,t){t.r(n),t.d(n,{default:function(){return p}});var r=t(6540),a=t(2479),o=t(1302),i=t(6462),l=t(7843),d=t(6898),c=t(362);var s=e=>{let{query:n}=e;const{0:t,1:a}=(0,r.useState)([]),{0:o,1:s}=(0,r.useState)(!0),{0:p,1:u}=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{console.log("ðŸ“¡ [DashboardTable] Fetching from user_member_v2â€¦"),s(!0),u(null);try{const{data:e,error:n}=await d.ND.from("user_member_v2").select("\n            id,\n            created_at,\n            full_name,\n            hometown,\n            title,\n            avatar_url,\n            field_of_expertise\n          ").order("created_at",{ascending:!1});if(n)throw n;if(null==e||!e.length)return console.warn("âš ï¸ No members found in user_member_v2"),void a([]);const t=["6c77d859-1af1-418e-b0e0-0d3cc4e80fad","02c567a2-b193-4009-89e5-884386540733","e0a7bf63-0d67-4e86-95f2-2e2c3276e7f6","e04e38e0-7eed-4281-bc05-89fb6c9b30f1","387899c3-fa8a-4582-b6dc-0833dfc02f40"],r=e.filter(e=>!t.includes(e.id));console.log(`âœ… Loaded ${r.length} visible members (filtered from ${e.length})`),a(r)}catch(e){console.error("ðŸ’¥ Fetch error:",e),u(e.message||"Unknown error"),a([])}finally{s(!1)}})()},[]);const b=t.filter(e=>[e.full_name,e.title,e.field_of_expertise,e.hometown].join(" ").toLowerCase().includes(n.toLowerCase()));return o?r.createElement("div",{style:{padding:40,textAlign:"center"}},"â³ Loading membersâ€¦"):p?r.createElement("div",{style:{padding:40,textAlign:"center",color:"red"}},"âŒ ",p):t.length?b.length?r.createElement("section",{style:{position:"relative"}},r.createElement("style",null,c.P),r.createElement("div",{className:"table-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:"1px solid var(--border)"}},r.createElement("div",null,r.createElement("strong",null,"Members"),r.createElement("div",{style:{fontSize:"11px",color:"var(--muted)"}},"Showing ",b.length," of ",t.length," total"))),r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"#"),r.createElement("th",null,"Avatar"),r.createElement("th",null,"Full Name"),r.createElement("th",null,"Title"),r.createElement("th",null,"Expertise"),r.createElement("th",null,"Hometown"),r.createElement("th",null,"Joined"))),r.createElement("tbody",null,b.map((e,n)=>r.createElement("tr",{key:e.id,onClick:()=>(0,i.navigate)(`${e.id}`)},r.createElement("td",null,n+1),r.createElement("td",null,r.createElement("div",{className:"avatar-wrapper"},r.createElement(l.A,{url:e.avatar_url||"",width:32,height:32,alt:e.full_name||"User Avatar"}))),r.createElement("td",null,e.full_name||"â€”"),r.createElement("td",null,e.title||"â€”"),r.createElement("td",null,e.field_of_expertise||"â€”"),r.createElement("td",null,e.hometown||"â€”"),r.createElement("td",null,e.created_at?new Date(e.created_at).toLocaleDateString(void 0,{year:"2-digit",month:"2-digit",day:"2-digit"}):"â€”")))))):r.createElement("div",{style:{padding:40,textAlign:"center",color:"#888"}},"ðŸ” No results match ",r.createElement("code",null,n),"."):r.createElement("div",{style:{padding:40,textAlign:"center",color:"#888"}},"âš ï¸ No members found in ",r.createElement("code",null,"user_member_v2"),".")};function p(){return r.createElement(a.A,{role:"admin"},r.createElement(o.A,null,e=>{let{query:n}=e;return r.createElement(s,{query:n})}))}},1302:function(e,n,t){t.d(n,{A:function(){return d}});var r=t(6540),a=t(7490),o=t(5268);function i(e){let{navOpen:n,setNavOpen:t}=e;const a=e=>{(0,o.navigate)(e),t(!1)};return r.createElement(r.Fragment,null,r.createElement("style",null,`\n        .sidenav-overlay {\n          position: fixed; top: 0; left: 0; height: 100%;\n          width: ${n?"220px":"0"};\n          background: var(--panel); border-right: 1px solid var(--border);\n          overflow: hidden; transition: width .25s ease-in-out; z-index: 40;\n          display: flex; flex-direction: column;\n          padding: ${n?"20px":"0"};\n          gap: 6px;\n        }\n        .sidenav-overlay button {\n          background: none; border: none; color: var(--text);\n          text-align: left; padding: 10px; font-size: 14px; border-radius: 6px;\n          cursor: pointer;\n          width: 100%;\n        }\n        .sidenav-overlay button:hover { background: var(--accent-bg); }\n        .nav-backdrop {\n          position: fixed; inset: 0; background: rgba(0,0,0,0.4); z-index: 35;\n          opacity: ${n?"1":"0"};\n          pointer-events: ${n?"auto":"none"};\n          transition: opacity .2s;\n        }\n      `),r.createElement("div",{className:"sidenav-overlay"},r.createElement("button",{onClick:()=>a("/cms")},"ðŸ  Dashboard"),r.createElement("button",{onClick:()=>a("/cms/candidates")},"ðŸ‘¥ Candidates"),r.createElement("button",{onClick:()=>a("/cms/members")},"ðŸ§‘â€ðŸ¤â€ðŸ§‘ Members"),r.createElement("button",{onClick:()=>a("/cms/editor")},"ðŸ“ Editor"),r.createElement("button",{onClick:()=>a("/cms/pricing")},"ðŸ’° Pricing & Usage")),r.createElement("div",{className:"nav-backdrop",onClick:()=>t(!1)}))}var l=t(3641);function d(e){let{title:n="Tinh Hoa Viá»‡t CMS",onThemeChange:t,children:o}=e;const{0:d,1:c}=(0,r.useState)("light"),{0:s,1:p}=(0,r.useState)(!1),{0:u,1:b}=(0,r.useState)("");return r.createElement("div",{className:`app ${d}`},r.createElement("style",null,(0,a.X)(s)),r.createElement(i,{navOpen:s,setNavOpen:p}),r.createElement(l.A,{title:n,theme:d,setTheme:c,navOpen:s,setNavOpen:p,onThemeChange:t}),r.createElement("main",null,"function"==typeof o?o({query:u}):o),r.createElement("footer",null,"Tinh Hoa Viet"))}},2479:function(e,n,t){var r=t(6540),a=t(6898),o=t(5268);n.A=e=>{let{children:n,role:t="member",redirect:i="/members/dashboard"}=e;const{0:l,1:d}=(0,r.useState)(null),{0:c,1:s}=(0,r.useState)(null),{0:p,1:u}=(0,r.useState)(!0),{0:b,1:g}=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{u(!0);try{var e,n;const{data:r}=await a.ND.auth.getSession(),i=r.session;if(d(i),null==i||!i.user)return(0,o.navigate)("/sign-in"),g(!1),void s(null);const l=null!==(e=null===(n=i.user.user_metadata)||void 0===n?void 0:n.role)&&void 0!==e?e:"member";if(s(l),"string"==typeof t)g(l===t||"member"===t&&!!l);else{const e=t[l];g(!!e)}}catch(r){console.error("RoleRoutes check error:",r),g(!1)}finally{u(!1)}})()},[t]);const m={allowed:b,loading:p,session:l,role:c};return"function"==typeof n?r.createElement(r.Fragment,null,n(m)):((0,r.useEffect)(()=>{if(!p&&c)if("string"==typeof t)b||(0,o.navigate)(i);else{const e=t[c];e?!b&&e.onFalse?(0,o.navigate)(e.onFalse):b&&e.onTrue&&(0,o.navigate)(e.onTrue):(0,o.navigate)(i)}},[p,b,c,t,i]),p?null:b||"string"!=typeof t?r.createElement(r.Fragment,null,n):null)}},3641:function(e,n,t){t.d(n,{A:function(){return i}});var r=t(6540),a=t(8697),o=t(9230);function i(e){let{title:n="Tinh Hoa Viá»‡t CMS",onThemeChange:t,theme:i,setTheme:l,navOpen:d,setNavOpen:c}=e;const{0:s,1:p}=(0,r.useState)(!1),u=(0,r.useRef)(null);return(0,r.useEffect)(()=>{const e=e=>{u.current&&!u.current.contains(e.target)&&p(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),(0,r.useEffect)(()=>{document.body.dataset.theme=i,null==t||t(i)},[i,t]),r.createElement(r.Fragment,null,r.createElement("style",null,"\n        header {\n          background: var(--panel); border-bottom: 1px solid var(--border);\n          padding: 12px 20px; display: flex; align-items: center;\n          justify-content: space-between; position: sticky; top: 0; z-index: 30;\n        }\n        .brand { display: flex; align-items: center; gap: 8px;\n          font-weight: 600; color: var(--text); font-size: 14px;}\n        .brand-icon { width: 24px; height: 24px;\n          background: linear-gradient(135deg, #10b981, #059669);\n          border-radius: 3px;}\n        .actions { display: flex; align-items: center; gap: 10px;}\n        .dropdown { position: relative; }\n        .menu { position: absolute; top: 110%; right: 0; background: var(--panel);\n          border: 1px solid var(--border); border-radius: 8px;\n          box-shadow: 0 4px 10px rgba(0,0,0,0.2);\n          width: 160px; overflow: hidden; z-index: 50; display: none;}\n        .menu.open { display: block; }\n        .menu button { width: 100%; justify-content: flex-start;\n          background: none; border-radius: 0; }\n        .menu button:hover { background: var(--accent-bg); }\n        .menu hr { border: none; border-top: 1px solid var(--border); margin: 4px 0; }\n      "),r.createElement("header",null,r.createElement("div",{className:"brand"},r.createElement("button",{onClick:()=>c(!d),style:{background:"none",border:"none",cursor:"pointer"}},d?r.createElement(a.A,{size:18}):r.createElement(o.A,{size:18})),r.createElement("div",{className:"brand-icon"}),n),r.createElement("div",{className:"actions"})))}},7490:function(e,n,t){t.d(n,{X:function(){return r}});const r=function(e){return void 0===e&&(e=!1),`\n  body, html { margin: 0; font-family: 'Inter', sans-serif; }\n  .app { min-height: 100vh; background: var(--bg); color: var(--text);\n    transition: background .3s, color .3s; overflow-x: hidden;}\n  .app.light {\n    --bg: #f8fafc; --panel: #ffffff; --border: rgba(0,0,0,0.08);\n    --text: #111827; --muted: #6b7280; --accent: #10b981;\n    --accent-bg: rgba(16,185,129,0.1);\n  }\n  .app.dark {\n    --bg: #0f1318; --panel: #0b0f14; --border: rgba(255,255,255,0.08);\n    --text: #d1d5db; --muted: #9ca3af; --accent: #10b981;\n    --accent-bg: rgba(16,185,129,0.15);\n  }\n\n  header {\n    background: var(--panel); border-bottom: 1px solid var(--border);\n    padding: 12px 20px; display: flex; align-items: center;\n    justify-content: space-between; position: sticky; top: 0; z-index: 30;\n    overflow: hidden; /* keep layout stable during nav animation */\n  }\n\n  .brand { \n    display: inline-flex; align-items: center; gap: 8px;\n    font-weight: 600; color: var(--text); font-size: 14px;\n    white-space: nowrap; overflow: hidden; flex-shrink: 0;\n  }\n  /* âœ… explicitly protect hamburger icon */\n  .brand button.hamburger {\n    all: unset;                /* ignore global button resets */\n    display: flex; align-items: center; justify-content: center;\n    width: 28px; height: 28px;\n    cursor: pointer; color: var(--text);\n    flex-shrink: 0;\n  }\n\n  .brand-icon { width: 24px; height: 24px;\n    background: linear-gradient(135deg, #10b981, #059669);\n    border-radius: 3px; flex-shrink: 0; }\n\n  .actions { display: flex; align-items: center; gap: 10px;}\n\n  .search-box { position: relative; }\n  .search-box input {\n    background: var(--panel); border: 1px solid var(--border);\n    border-radius: 4px; color: var(--text);\n    padding: 7px 8px 7px 30px; width: 200px; font-size: 13px;\n    outline: none; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\n  }\n  .search-icon {\n    position: absolute; left: 8px; top: 50%;\n    transform: translateY(-50%); opacity: .6; color: var(--muted);\n  }\n\n  button {\n    border: none; border-radius: 5px; font-size: 13px; padding: 7px 12px;\n    cursor: pointer; background: var(--panel); color: var(--text);\n    display: flex; align-items: center; gap: 6px; transition: all .2s;\n  }\n  button:hover { background: var(--accent-bg); }\n  .primary-btn { background: var(--accent); color: #072c21; font-weight: 500;}\n\n  main { max-width: 1100px; margin: 30px auto; padding: 0 20px;}\n  section { background: var(--panel); border: 1px solid var(--border);\n    border-radius: 10px; overflow: hidden;}\n\n  .table-header {\n    display: flex; justify-content: space-between; align-items: center;\n    padding: 12px 16px; border-bottom: 1px solid var(--border);\n  }\n\n  table { width: 100%; border-collapse: collapse; font-size: 13px; }\n  th, td {\n    text-align: left; padding: 8px 16px; border-bottom: 1px solid var(--border);\n    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\n    max-width: 180px;\n  }\n  th { color: var(--muted); font-size: 11px; text-transform: uppercase; }\n  td:hover { overflow: visible; white-space: normal; }\n  td[title]:hover::after {\n    content: attr(title);\n    position: absolute; background: var(--panel); color: var(--text);\n    border: 1px solid var(--border); padding: 6px 8px; border-radius: 5px;\n    white-space: normal; z-index: 999; box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n  }\n  tr:hover { background: var(--accent-bg); }\n\n  .pill { display: inline-flex; align-items: center; gap: 5px;\n    border-radius: 5px; padding: 2px 8px; font-size: 11px; }\n  .pill.Approved { background: rgba(16,185,129,0.15); color: #10b981; }\n  .pill.Pending { background: rgba(245,158,11,0.15); color: #f59e0b; }\n  .pill["Under Review"] { background: rgba(59,130,246,0.15); color: #3b82f6; }\n\n  footer { text-align: center; color: var(--muted); font-size: 12px;\n    margin: 40px 0 20px;}\n\n  .dropdown { position: relative; }\n  .menu {\n    position: absolute; top: 110%; right: 0; background: var(--panel);\n    border: 1px solid var(--border); border-radius: 8px;\n    box-shadow: 0 4px 10px rgba(0,0,0,0.2);\n    width: 160px; overflow: hidden; z-index: 50; display: none;\n  }\n  .menu.open { display: block; }\n  .menu button { width: 100%; justify-content: flex-start;\n    background: none; border-radius: 0; }\n  .menu button:hover { background: var(--accent-bg); }\n  .menu hr { border: none; border-top: 1px solid var(--border); margin: 4px 0; }\n\n  .sidenav-overlay {\n    position: fixed; top: 0; left: 0; height: 100%;\n    width: ${e?"220px":"0"};\n    background: var(--panel); border-right: 1px solid var(--border);\n    overflow: hidden; transition: width .25s ease-in-out; z-index: 40;\n    display: flex; flex-direction: column; padding: ${e?"20px":"0"};\n  }\n  .sidenav-overlay button {\n    background: none; border: none; color: var(--text);\n    text-align: left; padding: 8px; font-size: 14px; border-radius: 6px;\n  }\n  .sidenav-overlay button:hover { background: var(--accent-bg); }\n  .nav-backdrop {\n    position: fixed; inset: 0; background: rgba(0,0,0,0.4); z-index: 35;\n    opacity: ${e?"1":"0"};\n    pointer-events: ${e?"auto":"none"};\n    transition: opacity .2s;\n  }\n`}},7843:function(e,n,t){t.d(n,{A:function(){return a}});var r=t(6540);var a=e=>{let{url:n,width:t=100,height:a=100,alt:o="User Avatar",className:i=""}=e;const{0:l,1:d}=(0,r.useState)(!1),{0:c,1:s}=(0,r.useState)(!1),p=!n||c||""===n.trim()||!l;return r.createElement("img",{src:p?"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjkwOSIgaGVpZ2h0PSIyOTA5IiB2aWV3Qm94PSIwIDAgMjkwOSAyOTA5IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjkwOC42IDE0NTQuMjVDMjkwOC42IDIyNTcuNCAyMjU3LjQ4IDI5MDguNSAxNDU0LjMgMjkwOC41QzY1MS4xMiAyOTA4LjUgMCAyMjU3LjQgMCAxNDU0LjI1QzAgNjUxLjA5NyA2NTEuMTIgMCAxNDU0LjMgMEMyMjU3LjQ4IDAgMjkwOC42IDY1MS4wOTcgMjkwOC42IDE0NTQuMjVaIiBmaWxsPSIjRDdFMUUxIi8+CjxwYXRoIGQ9Ik0yMzY3LjkzIDI1MDUuMjRWMjU4NS42OUMyMTE4LjIzIDI3ODcuNTYgMTgwMC4zOSAyOTA4LjQ3IDE0NTQuMjcgMjkwOC40N0MxMTA4LjIyIDI5MDguNDcgNzkwLjMzOSAyNzg3LjU2IDU0MC42NyAyNTg1Ljc2VjI1MDUuMjRDNTQwLjY3IDIwNzAuNTEgODkzLjEwNSAxNzE4LjAyIDEzMjcuODUgMTcxOC4wMkgxNTgwLjcxQzIwMTUuNSAxNzE4LjAyIDIzNjcuOTMgMjA3MC41MSAyMzY3LjkzIDI1MDUuMjRaIiBmaWxsPSIjQTFBRUIwIi8+CjxwYXRoIGQ9Ik0xOTM3LjM2IDEwMjIuMjZDMTkzNy4zNiAxMjg5LjA0IDE3MjEuMDkgMTUwNS4zIDE0NTQuMyAxNTA1LjNDMTE4Ny41MSAxNTA1LjMgOTcxLjI0MSAxMjg5LjA0IDk3MS4yNDEgMTAyMi4yNkM5NzEuMjQxIDc1NS40NzMgMTE4Ny41MSA1MzkuMjEzIDE0NTQuMyA1MzkuMjEzQzE3MjEuMDkgNTM5LjIxMyAxOTM3LjM2IDc1NS40NzMgMTkzNy4zNiAxMDIyLjI2WiIgZmlsbD0iI0ExQUVCMCIvPgo8L3N2Zz4K":n,alt:o,width:t,height:a,className:`rounded-full object-cover ${i} ${p?"fallback-avatar":""}`,onLoad:()=>d(!0),onError:()=>s(!0),loading:"lazy"})}},8697:function(e,n,t){t.d(n,{A:function(){return r}});const r=(0,t(9407).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9230:function(e,n,t){t.d(n,{A:function(){return r}});const r=(0,t(9407).A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},9407:function(e,n,t){t.d(n,{A:function(){return c}});var r=t(6540);const a=e=>{const n=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,t)=>t?t.toUpperCase():n.toLowerCase()))(e);return n.charAt(0).toUpperCase()+n.slice(1)},o=(...e)=>e.filter((e,n,t)=>Boolean(e)&&""!==e.trim()&&t.indexOf(e)===n).join(" ").trim(),i=e=>{for(const n in e)if(n.startsWith("aria-")||"role"===n||"title"===n)return!0};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const d=(0,r.forwardRef)(({color:e="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:d="",children:c,iconNode:s,...p},u)=>(0,r.createElement)("svg",{ref:u,...l,width:n,height:n,stroke:e,strokeWidth:a?24*Number(t)/Number(n):t,className:o("lucide",d),...!c&&!i(p)&&{"aria-hidden":"true"},...p},[...s.map(([e,n])=>(0,r.createElement)(e,n)),...Array.isArray(c)?c:[c]])),c=(e,n)=>{const t=(0,r.forwardRef)(({className:t,...i},l)=>{return(0,r.createElement)(d,{ref:l,iconNode:n,className:o(`lucide-${c=a(e),c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,t),...i});var c});return t.displayName=a(e),t}}}]);
//# sourceMappingURL=component---src-pages-cms-members-tsx-3ca39ec569c7474a0167.js.map